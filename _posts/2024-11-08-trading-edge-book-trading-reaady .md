---
layout: single
title:  "실전 추세투자법(5/6): 트레이딩 준비"
description: 실전 추세투자법 책의 트레이딩 준비 부분을 정리한 글
categories: 투자
tag: [주식,퀀트,책]
toc: true
author_profile: false
header:
 teaser: /images/2024-11-08-trading-edge-book-trading-ready/trading-pattern.webp
 og_image: /images/2024-11-08-trading-edge-book-trading-ready/trading-pattern.webp

# sidebar:
#     nav: "docs"
# search: true
---
# 트레이더로 가는 3단계 

여기서는 [실전 추세투자법](/투자/trading-edge-book)의 트레이딩 준비과정을 정리한다. 

## 지지 않는 트레이더가 된다
> 지지 않는 트레이더란 자금관리와 리스크관리 규칙을 빈틈없이 지키는 트레이더를 말한다. 
> 오랫동안 트레이딩을 하다 보면 매매 타이밍을 포착하는 기술은 자연스럽게 숙달된다. 하지만 자금관리와 리스크관리 기법은 제대로 배우지 않는 한 아무리 시간이 흘러도 익힐 수 없다

## 이기는 트레이더가 된다
> 트레이딩 세계에서는 오늘 처음으로 주문한 초보 트레이더나 기관투자가나 똑같은 조건에서 겨루어야 한다. 아마추어라고 선언하는 것은 "저는 호구입니다. 마음껏 털어가세요”라고 말하는 것과 같다.

> 전업 트레이더가 아니니 별수 없다고 생각하는 사람도 있을 것이다. 본업을 가지고 있는 것은 좋다. 하지만 그 상황에서 트레이딩할 때도 새로운 비즈니스에 도전한다는 의식을 가져야 한다. 직업을 가지고 있다면 짧은 시간에 집중적으로 트레이딩해야 하므로, 사전에 조사하고 분석하는 것은 필수적이다. 그리고 '확률의 비즈니스'로서 트레이딩을 성공시키려면 반드시 대수의 법칙을 활용해야 한다.

> 대수의 법칙은 불확실한 트레이딩 세계에서 확실하다고 말할 수 있는 유일한 법칙이다. 확률적으로 유리한 타이밍에서만 트레이딩하기 때문에 도중에 손익을 반복할 수도 있지만 최종적으로는 반드시 이길 것이다. 바로 그때 트레이딩이 비즈니스로 바뀐다.

> 확률에서는 이미 반대편으로 움직일 것도 고려하고 있다. 예를들어 시세가 상승할 확률이 66%일 때 샀다면, 세번 중 한번은 내려갈 것이다. 그러므로 그 하락은 예측 범위 안에 있다고 할 수 있다. 질 확률도 있다는 사실을 분명히 의식하면서 최종적으로는 대수의 법칙에 따라 이길 수 있다고 확신하는 것이다. 그러므로 당장의 승패로 일희일비할 필요가 없다.

> 기술적 분석의 매매 신호가 상승 추세나 하락 추세를 가르쳐주는 편리한 도구라고 착각하는 사람은 트레이딩에 실패하면 신호에 속았다며 원망하기도 한다. 하지만 트레이딩 에지(TE)의 본질을 올바르게 이해한다면 어떤 기술적 지표든 자기 역할이 있다는 것을 알게 될 것이다.

## 안정적으로 이기는 트레이더가 된다
> 트레이더는 그저 이기기만 하면 되는 것이 아니다. 더 중요한 것이 안정적으로 이기는 것이다. 그것이 마치 노린 듯이 정확히 이기는 것이며, 그러기 위해서는 트레이딩 규칙을 세워야 한다.

# 트레이더에게 필수적인 세가지 조건
## 트레이딩 자금을 명확히 한다

## 목표 수익을 설정한다
수익 목표를 크게 잡으면 그만큼 리스크가 커지고, 수익 목표를 낮추면 그만큼 리스크를 낮출 수 있다. 리스크는 낮으면서 수익만 높은 투자법은 없다. 

제로 리스크에 수익이 안정적으로 늘어난다는 투자법이나 FX와 주식으로 원금을 단기간에 10배로 만들어준다는 광고 문구는 믿지 마라. 물론 가격 변동이 클 때는 트레이딩 자금이 2배, 3배가 되는 경우도 있다. 하지만 매번 정확히 2배, 3배의 수익을 달성하게 하는 기법은 없다.

## 승리의 방정식을 만든다
1회당 수익이란 기댓값을 말하고, 이는 곧 트레이딩 에지(TE)를 의미한다. 1000만원의 자금을 가진 투자자가 30만원의 수익을 달성하기 위해서는 승률과 평균수익이 얼마나 되어야 하는지 다음 식으로 구해볼 수 있다. 승률 50%와 손절매가 2N에서 발생한다고 하면, 즉 한번의 매매에 확정되는 최대 손실이 2%라면 수식은 아래와 같이 된다.

$$
TE= 0.5 \times 평균수익 - 0.5 \times 20만원 = 30만원
$$

위 식에 따르면 평균수익 80만원이 필요하다. 이 결과를 통해 [RR비율](/투자/trading-edge-book)이 4라는 것을 확인할 수 있다.

아래 그림의 표는 30만원의 수익을 달성하기위한 승률과 RR비율을 나타낸다. 만약 표안에서 가능성이 있는 패턴을 찾을 수 없다면 수익 목표를 달성하기는 애초에 어려울 수밖에 없다.

<p align="center">   
    <img src="/images/2024-11-08-trading-edge-book-trading-ready/trading-pattern.webp" alt="목표 수익을 얻기위한 트레이딩 패턴 표">
    <br>
   <span style="font-style: italic; color: #FFFFFF;">Fig. 1 목표수익을 얻기위한 트레이딩 패턴표 (출처: 실전 추세투자법) </span>
</p>

좀더 낮은 승률이라도, RR비율이 낮아도, 연간 목표를 달성할 수있는 방법이 하나 있다. 바로, 트레이딩 횟수를 늘리는 것이다. 연간 트레이딩 횟수를 늘리면 TE가 낮아도 연간 수익은 커지기 때문이다.

$$
TE\times \text{연간 트레이딩 횟수} = \text{연간 수익}
$$

$$
\text{연간 목표 수익}=(승률 \times \text{평균수익} - 승률 \times \text{평균손실})\times \text{트레이딩 횟수}
$$

그러나 단일 종목에서 트레이딩 횟수를 늘리면, 수익이 날 확률이 낮은 곳에서도 무리하게 진입하기 쉽다. 그러면 TE가 낮아질 수밖에 없다. 그 마이너스 효과를 극복하기 위해서는 트레이딩 종목을 늘려야 한다.

연간 목표 수익이 600만원이라고 해보자. 이 목표를 달성할 수 있는 모델은 여러가지가 있을 수 있는데 다음의 네가지를 생각해볼 수 있다.

*모델 1*
<div class="notice--primary">
<ul>
    <li style="font-size: 1.25em;">승률 60%, 평균수익 25만원, 평균손실 30만원, 연간 트레이딩 횟수 200회</li>
    <li style="font-size: 1.25em;">TE = 3만원</li>
    <li style="font-size: 1.25em;">연간 수익 = 3만원x200회= 600만원</li>
</ul>
</div>

*모델 2*
<div class="notice--primary">
<ul>
    <li style="font-size: 1.25em;">승률 70%, 평균수익 30만원, 평균손실 30만원, 연간 트레이딩 횟수 50회</li>
    <li style="font-size: 1.25em;">TE = 12만원</li>
    <li style="font-size: 1.25em;">연간 수익 = 12만원x50회= 600만원</li>
</ul>
</div>

*모델 3*
<div class="notice--primary">
<ul>
    <li style="font-size: 1.25em;">승률 50%, 평균수익 40만원, 평균손실 25만원, 연간 트레이딩 횟수 80회</li>
    <li style="font-size: 1.25em;">TE = 7.5만원</li>
    <li style="font-size: 1.25em;">연간 수익 = 7.5만원x80회= 600만원</li>
</ul>
</div>

*모델 4*
<div class="notice--primary">
<ul>
    <li style="font-size: 1.25em;">승률 40%, 평균수익 60만원, 평균손실 30만원, 연간 트레이딩 횟수 100회</li>
    <li style="font-size: 1.25em;">TE = 6만원</li>
    <li style="font-size: 1.25em;">연간 수익 = 6만원x100회 = 600만원</li>
</ul>
</div>

목표 수익을 달성하기 위해서는 위의 네가지 중 자신에게 맞는 모델을 선택하고 트레이딩 규칙이 그 모델에 맞도록 조정하는 것이 필요하다. 

트레이딩 기법이 만들어지면, TE와 연간 목표 수익을 기본으로 몇번 트레이딩을 하면 되는지 계산할 수 있다.

$$
\text{필요한 트레이딩 횟수} = \text{연간 목표 수익} / TE
$$

여기서 주의해야 할 점은 무턱대고 트레이딩 횟수만 늘리려고 하면 오히려 기댓값을 끌어내리게 된다는 것이다. TE가 없을 때도 트레이딩을 반복하게 되기 때문이다. 그런 실패를 피하려면 트레이딩하는 종목을 늘리는 수밖에 없다. 즉, 종목 수를 늘려서 트레이딩 횟수를 늘리고, 그로써 목표 수익을 달성하는 것이다.

물론 여기서 소개한 기법을 구사해도 트레이딩하는 종목의 가격 변동률은 매년 달라지기 때문에, 안정적으로 수익을 올린다는 것은 간단한 일이 아니다. 하지만 이런 점들을 생각하면서 트레이딩하는 것과 아무 생각없이 트레이딩하는 것에는 상당한 차이가 있다.

# 트레이딩 기록법
## 진입기록항목
1. 주문 시간
2. 종목 코드 (주식의 경우)
3. 종목명
4. 매매 종류(매수/매도)
5. 주문 종류(시장가, 지정가, 역지정가 주문 등)
6. 거래량(몇 주, 몇 통화, 몇 계약)
7. 주문 가격
8. 체결 시간
9. 체결 가격
10. 슬리피지
11. ATR
12. 유닛 환산
13. 진입 이유

7번의 주문 가격은 시장가 주문, 지정가 주문, 역지정가 주문으로 나눠어 내용이 조금씩 다르다. 원래 시장가 주문은 주문을 낼 때의 가격과 주문이 체결될 때의 가격이 같아야 한다. 하지만 주문 버튼을 누른 후 그 주문이 HTS를 통해 거래소 등에 도달하는 동안 가격이 바뀌는 경우도 있다. 가격 변화가 급격할 때가 그렇다. 따라서 시장가 주문을 냈을 경우에는 주문 버튼을 눌렀을 때의 가격이 주문 가격이고, 실제 체결된 가격이 거래 가격이 된다.

한편 역지정가 주문은 가격을 지정가 주문과 반대로 정하는 것이다. 즉, 몇원 이하에서 매도 또는 몇원 이상에서 매수라고 내는 주문이다. 예를들어 10000원 이하에서 매도라는 주문을 냈을 때 10000원이 주문 가격이고, 그 주문이 9999원에 체결됐다면 9999원이 거래 가격이 된다.

주문 방식별로 주문 가격을 정리하면 다음과 같다.
- 시장가 주문: 주문을 내는 시점의 가격
- 지정가 주문: 지정한 가격
- 역지정가 주문: 역지정한 가격

10번 슬리피지는 주문 가격과 체결 가격의 차이를 말한다. 슬리피지는 유리한 쪽으로 움직였을 때는 '+'로, 불리 한쪽으로 움직였을 때는 '-'로 기록한다.

13번 진입 이유는 대단히 중요한 항목이다. 이미 자신만의 규칙을 확립한 트레이더는 예를들어 규칙 3번에 따라 매수 진입이라는 식으로 간단히 작성할 수 있을 것이다.

## 청산기록항목
1. 주문시간
2. 매매 종류(매수 진입의 매도 청산인지, 매도 진입의 매수 청산인지)
3. 주문 종류(시장가, 지정가, 역지정가 등)
4. 수량
5. 주문가격
6. 체결 시간
7. 체결 가격
8. 슬리피지
9. 시세폭(수익폭, 손절매폭)
10. 손익
11. 스와프 등
12. 수수료(진입 시와 정산 시의 수수료를 함께)
13. 차감 손익
14. N 환산
15. 청산 이유

4번 수량은 진입했을 때 수량과 반드시 똑같을 필요는 없다. 예를 들어 6,000주를 매수하여 3,000주씩 청산하는 경우도 있을 테고, 한 번에 낸 주문이 여러 가격으로 체결되는 경우도 있을 것이다. 그럴 때는 몇 줄에 나눠서 기록한다.

3번 주문가격은 진입 기록과 같은 방식으로 작성한다. 시장가 주문은 주문을 낸 가격을 기입하고, 지정가와 역지정가 주문은 지정한 가격을 적는다. 8번 슬리피지도 진입 기록과 같은 방식이다.

# 트레이딩 규칙을 만들자
## 기본규칙
### 거래종목, 거래하는봉(캔들)의 조건
- 유동성이 있다. 
- 변동성이 있다. 
- 매수와 매도가 가능하다. 
- 거래에 규제가 없다.
- 갭이 없다. 
- 위아래 꼬리가 길지 않다. 
- 시세 등락이 심하지 않다.
- 추세가 알아보기 쉽고 장기 지속한다.

트레이딩하는 시장은 많을수록 좋다. 주식, 외환, 원자재 중 하나만 트레이딩한다면 기회를 스스로 제한하는 것이다. 다만, 어떤 시장이든 위의 조건에 맞아야 한다.

### 트레이딩 자금과 연간 목표 수익
- 없어져도 생활에 지장을 주지 않는 자금. 그중에서 투자에 사용하겠다고 정한 금액
- 수익 목표는 연간 OO%

### 1회당 거래량
- ATR에서 역산한 1유닛 단위 
- (※ 1유닛은 1회에 부담할 수 있는 1%의 리스크를 취하는 거래량을 말함)

### 최대 거래량
- 동일 종목으로 최대 4유닛까지
- 상관관계가 높아지지 않는 선에서 3종목으로 최대 12유닛까지

### 진입 규칙
- 이동평균선 대순한 분석과 대순한 분석 MACD 신호를 바탕으로 진입
- 조기진입, 시험진입

### 손절매 규칙
- 진입 지점과 반대 방향으로 ATR의 2배에서 3배 지점에 역지정가 주문을 내놓는다.

### 트레일링스탑 규칙
- 가격이 1/2N 상승할 때마다 손절매 라인을 1/2N만큼 끌어올린다.
- 추가한 유닛도 포함하여 손절매 라인이 평균 매수가를 넘어서는 가격위치까지 위 규칙을 반복한다.
- 그 이후는 가격이 1N 상승할 때마다 손절매 라인을 1/2N만큼 끌어올린다

### 수익 확정 규칙
- 전날 중기 이동평균선 가격에 역지정가 주문
- 가격이 그 금액 아래로 내려가면 청산

### 포지션 추가 규칙 
- 가격이 1/2N 상승할 때마다 1유닛 추가
- 최대 4유닛까지(즉, 추가 매매는 3화까지)

### 기타규칙
- 트레이딩 시간을 어느 정도로 할 것인가.
- 수익금을 트레이딩 자금에 추가할 것인가, 아니면 따로 뺄 것인가.
- 월간 어느 정도 손실이 나면 트레이딩을 멈출 것인가.
- 월간 어느 정도 수익이 나면 트레이딩을 멈출 것인가.
- 본업이 매우 바쁘거나 건강 이상, 신경 불안이 있을 경우 트레이딩을 멈출 것인가 또는 이를 고려하지 않을 것인가.

# 트레이딩 검증

## 검증에 필요한 데이터
1. 트레이딩 자금: A
2. 트레이딩 기간: B
3. 트레이딩 횟수: C
4. 승리한 트레이딩 횟수: D
5. 패배한 트레이딩 횟수: E
6. 전체 수익금: F
7. 전체 손실금: G

이때 주의해야 할 점은 트레이딩 횟수(C)를 계산하는 방식이다.
예를 들어 1만 주를 매수했는데 5000주씩 두 번으로 나눠서 청산했을 경우, 트레이딩 횟수를 2회로 본다면 승률과 RR비율을 산출할 때 올바른 수치가 나오지 않는다.

이럴 때 유용한 것이 터틀식 1유닛 단위 트레이딩이다. 진입과 청산을 1유닛 단위로 실행하면 그 1유닛을 1회 트레이딩이라고 정확하게 정의할 수 있다. 예를 들어, 1유닛을 진입한 후에 포지션을 추가하여 4유닛까지 늘렸다고 하자. 그 4유닛을 한번에 청산했다면 트레이딩 횟수가 4회가 되므로 간단히 검증할 수 있다.

애초에 유닛이라는 방식은 트레이딩 규칙을 만드는 과정에서 생긴 개념이다. 트레이딩 규칙을 만드는 데 검증은 필수적인 작업이므로 모든 과정을 유닛을 기준으로 생각하는 것이 편리하다.

## 분석항목
### 분석항목 1
1. 차감 손익: H=F-G
2. 평균수익: I=F/D
3. 평균손실: J=G/E

### 분석 항목 2
1. RR비율: K=I/J
2. 승률: L=D/C
3. 패율: M=1-L
4. TE: N=L×I-M×J 
5. 기대할 수 있는 연간 손익: O=N×C (C는 연간 트레이딩 횟수)
6. V 트레이딩률: P= O/X (※ 연간 목표 수익을 X라 함)
